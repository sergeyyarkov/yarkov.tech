---
import PageLayout from "@layouts/default.astro";
import PageHeading from "@components/PageHeading.astro";
import ContactForm from "@components/ContactForm.astro";
import ContactsList from "@components/ContactsList.astro";
import SubmittedTemplate from "@templates/Submitted.astro";
import { actions } from "astro:actions";
import { getLanguageFromURL, useTranslation } from "@i18n/utils";

const t = useTranslation(Astro);
const lang = getLanguageFromURL(Astro.url.pathname);
const contactsFormSubmitResult = Astro.getActionResult(actions.appeal);
---

{
	!contactsFormSubmitResult || contactsFormSubmitResult.error ? (
		<PageLayout noIndex lang={lang} title={t("pageTitle.contacts")} description={t("pageDescription.contacts")}>
			<PageHeading heading={t("pageTitle.contacts")} description={t("pageDescription.contacts")} />
			<section>
				<ContactForm />
				<ContactsList />
			</section>
		</PageLayout>
	) : (
		<SubmittedTemplate />
	)
}
