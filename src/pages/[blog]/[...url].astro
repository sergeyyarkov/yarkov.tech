---
import ArticleLayout from "@root/layouts/article.astro";
import { getArticleTranslationsBySlug } from "@/src/queries";

const { url } = Astro.params as { blog: string; url: string };
const slug = url.split("/").at(-1);

if (!slug) return Astro.redirect("/404");

const article = await getArticleTranslationsBySlug(slug);

if (!article) return Astro.redirect("/404");

// if (import.meta.env.PROD) await incArticleTranslationViews(article);
---

<ArticleLayout lang={article.languages_code?.code} article={article} />
