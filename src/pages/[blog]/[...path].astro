---
import ArticleLayout from "@root/layouts/article.astro";
import { fetchArticleBySlug } from "@/directus";

const { path } = Astro.params as { blog: string; path: string };
const slug = path.split("/").at(-1);

if (!slug) return Astro.redirect("/404");

const article = await fetchArticleBySlug(slug);

if (!article) return Astro.redirect("/404");
---

<ArticleLayout lang={article.languages_code.code} article={article} />
